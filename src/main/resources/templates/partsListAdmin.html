<!doctype html>
<html class="h-100" xmlns:th="http://www.thymeleaf.org" data-bs-theme="dark">
<head>
  <div th:replace="~{fragments/setup :: setup}"/>
  <style>
    tr{
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .button-group {
      display: flex;
      justify-content: space-between;
    }
  </style>
</head>
<body>
    <main>
      <div class="container-fluid">
        <div th:insert="~{fragments/header :: header}"></div>

        <div class="accordion py-5" id="partsList" style="width:60%; overflow:auto;">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCase" aria-expanded="true" aria-controls="collapseOne">
                Case
              </button>
            </h2>
            <div id="collapseCase" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editCase">
                      <input type="hidden" name="Case" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">케이스 데이터 추가</button>
                    </form>
                    <tr th:each="case : ${caseList}">
                      <td th:text="${case.name}">케이스 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editCase">
                            <input type="hidden" name="Case" th:value="${case.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCPUCooler" aria-expanded="true" aria-controls="collapseOne">
                CPUCooler
              </button>
            </h2>
            <div id="collapseCPUCooler" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editCPUCooler">
                      <input type="hidden" name="CPUCooler" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">CPU 쿨러 데이터 추가</button>
                    </form>
                    <tr th:each="cpuCooler : ${cpuCoolerList}">
                      <td th:text="${cpuCooler.name}">쿨러 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editCPUCooler">
                            <input type="hidden" name="CPUCooler" th:value="${cpuCooler.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCPU" aria-expanded="true" aria-controls="collapseOne">
                CPU
              </button>
            </h2>
            <div id="collapseCPU" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editCPU">
                      <input type="hidden" name="CPU" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">CPU 데이터 추가</button>
                    </form>
                    <tr th:each="cpu : ${cpuList}">
                      <td th:text="${cpu.name}">CPU 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editCPU">
                            <input type="hidden" name="CPU" th:value="{cpu.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDataStorage" aria-expanded="true" aria-controls="collapseOne">
                DataStorage
              </button>
            </h2>
            <div id="collapseDataStorage" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editDataStorage">
                      <input type="hidden" name="DataStorage" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">저장장치 데이터 추가</button>
                    </form>
                    <tr th:each="dataStorage : ${dataStorageList}">
                      <td th:text="${dataStorage.name}">저장장치 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editDataStorage">
                            <input type="hidden" name="DataStorage" th:value="${dataStorage.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGraphicsCard" aria-expanded="true" aria-controls="collapseOne">
                GraphicsCard
              </button>
            </h2>
            <div id="collapseGraphicsCard" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editGraphicsCard">
                      <input type="hidden" name="GraphicsCard" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">그래픽카드 데이터 추가</button>
                    </form>
                    <tr th:each="graphicsCard : ${graphicsCardList}">
                      <td th:text="${graphicsCard.name}">그래픽카드 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editGraphicsCard">
                            <input type="hidden" name="GraphicsCard" th:value="${graphicsCard.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMemory" aria-expanded="true" aria-controls="collapseOne">
                Memory
              </button>
            </h2>
            <div id="collapseMemory" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editMemory">
                      <input type="hidden" name="Memory" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">메모리 데이터 추가</button>
                    </form>
                    <tr th:each="memory : ${memoryList}">
                      <td th:text="${memory.name}">메모리 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editMemory">
                            <input type="hidden" name="Memory" th:value="${memory.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMotherBoard" aria-expanded="true" aria-controls="collapseOne">
                MotherBoard
              </button>
            </h2>
            <div id="collapseMotherBoard" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editMotherBoard">
                      <input type="hidden" name="MotherBoard" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">마더보드 데이터 추가</button>
                    </form>
                    <tr th:each="motherBoard : ${motherBoardList}">
                      <td th:text="${motherBoard.name}">마더보드 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editMotherBoard">
                            <input type="hidden" name="MotherBoard" th:value="${motherBoard.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePowerSupply" aria-expanded="true" aria-controls="collapseOne">
                PowerSupply
              </button>
            </h2>
            <div id="collapsePowerSupply" class="accordion-collapse collapse" data-bs-parent="#partsList">
              <div class="accordion-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <form method="get" action="/CusCom/adminPage/editPowerSupply">
                      <input type="hidden" name="PowerSupply" value="Sample">
                      <button class="btn btn-lg btn-primary" type="submit">파워서플라이 데이터 추가</button>
                    </form>
                    <tr th:each="powerSupply : ${powerSupplyList}">
                      <td th:text="${powerSupply.name}">파워서플라이 이름</td>
                      <td>
                        <div class="button-container" style="display: flex; gap: 10px;">
                          <form method="get" action="/CusCom/adminPage/editPowerSupply">
                            <input type="hidden" name="PowerSupply" th:value="${powerSupply.name}">
                            <button class="btn btn-primary" type="submit" style="border: none;">edit</button>
                          </form>
                          <button class="btn btn-primary" style="background-color: red; color: white; border: none;" onclick="deleteItem(this)">delete</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

      </div>
      <footer class="my-5 pt-5 text-body-secondary text-center text-small">
        <p class="mb-1">&copy; 2023 CusCom</p>
      </footer>

      <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function(){
          document.querySelectorAll(".delete-btn")
            .forEach(button => {
              const deleteData = {
                name: button.getAttribute("data-item-id"),
                type: findParentTableId(button)
              };

              button.addEventListener('click', function(){
                const id = button.getAttribute("data-id");
                fetch("/CusCom/adminPage/deleteParts",{
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                })
                .then(response => console.log(response))
                .then(document.querySelector('tr[data-id="${id}"]').remove())
                .catch(error => {
                    console.error("Error:", error);
                });
              });

            });
        });
      </script>
    </main>
</body>
</html>